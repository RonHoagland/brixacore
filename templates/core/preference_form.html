{% extends "layouts/app_shell.html" %}

{% block title %}Edit Preference - BrixaWares{% endblock %}
{% block page_title %}Edit Preference: {{ pref.name }}{% endblock %}

{% block main_content %}
<div class="card" style="background: white; padding: var(--bx-spacing-lg); border-radius: 8px; border: 1px solid var(--bx-color-border); max-width: 600px;">
    
    <div style="margin-bottom: var(--bx-spacing-lg);">
        <p style="color: var(--bx-color-text-muted);">{{ pref.description }}</p>
    </div>

    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        
        <div style="margin-bottom: var(--bx-spacing-lg);">
            <label for="id_value" style="display: block; margin-bottom: 0.5rem; font-weight: 500;">Value</label>
            
            {% if widget_type == 'select' %}
                <select name="value" id="id_value" style="width: 100%; padding: 0.5rem; border: 1px solid var(--bx-color-border); border-radius: 4px; background: white;">
                    {% for k, v in choices %}
                    <option value="{{ k }}" {% if k == pref.value %}selected{% endif %}>{{ v }}</option>
                    {% endfor %}
                </select>
            {% elif widget_type == 'file' %}
                <input type="file" name="value" id="id_value" style="width: 100%; padding: 0.5rem; border: 1px solid var(--bx-color-border); border-radius: 4px;">
                {% if pref.value %}
                <div style="margin-top: 8px; font-size: 0.9em;">
                    Current: <a href="{{ pref.value }}" target="_blank" style="color: var(--bx-color-primary);">{{ pref.value }}</a>
                </div>
                {% endif %}
            {% else %}
                <input type="text" name="value" id="id_value" value="{{ pref.value }}" style="width: 100%; padding: 0.5rem; border: 1px solid var(--bx-color-border); border-radius: 4px;">
            {% endif %}

            <div style="font-size: 0.85em; color: var(--bx-color-text-muted); margin-top: 0.25rem;">Default: {{ pref.default_value }}</div>
        </div>

        <div style="display: flex; gap: var(--bx-spacing-md);">
            <button type="submit" style="padding: 0.75rem 1.5rem; background-color: var(--bx-color-primary); color: white; border: none; border-radius: 4px; font-weight: 600; cursor: pointer;">
                Save Changes
            </button>
            <a href="{% url 'preference_list' %}" style="padding: 0.75rem 1.5rem; border: 1px solid var(--bx-color-border); border-radius: 4px; background: white; text-align: center;">Cancel</a>
        </div>
    </form>

</div>
{% endblock %}
