{% extends "layouts/app_shell.html" %}

{% block title %}Preferences - BrixaWares{% endblock %}
{% block page_title %}System Preferences{% endblock %}

{% block main_content %}
<div class="card" style="background: white; padding: var(--bx-spacing-lg); border-radius: 8px; border: 1px solid var(--bx-color-border);">
    <table style="width: 100%; border-collapse: collapse;">
        <thead>
            <tr style="border-bottom: 2px solid var(--bx-color-border); text-align: left;">
                <th style="padding: var(--bx-spacing-sm);">Name</th>
                <th style="padding: var(--bx-spacing-sm);">Key</th>
                <th style="padding: var(--bx-spacing-sm);">Value</th>
                <th style="padding: var(--bx-spacing-sm);">Action</th>
            </tr>
        </thead>
        <tbody>
            {% for p in preferences %}
            <tr style="border-bottom: 1px solid var(--bx-color-border);">
                <td style="padding: var(--bx-spacing-sm);">
                    <div style="font-weight: 500;">{{ p.name }}</div>
                    <div style="font-size: 0.85em; color: var(--bx-color-text-muted);">{{ p.description }}</div>
                </td>
                <td style="padding: var(--bx-spacing-sm);"><code>{{ p.key }}</code></td>
                <td style="padding: var(--bx-spacing-sm);">{{ p.value }}</td>
                <td style="padding: var(--bx-spacing-sm);">
                    {% if p.is_editable %}
                    <a href="{% url 'preference_update' p.pk %}" style="color: var(--bx-color-primary); font-weight: 500;">Edit</a>
                    {% else %}
                    <span style="color: var(--bx-color-text-muted);">Locked</span>
                    {% endif %}
                </td>
            </tr>
            {% empty %}
            <tr>
                <td colspan="4" style="padding: var(--bx-spacing-lg); text-align: center; color: var(--bx-color-text-muted);">
                    No preferences defined.
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    
    <div style="margin-top: var(--bx-spacing-lg);">
        <a href="{% url 'admin_home' %}" style="text-decoration: underline; color: var(--bx-color-text-muted);">Back to Admin</a>
    </div>
</div>
{% endblock %}
